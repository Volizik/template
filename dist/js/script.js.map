{"version":3,"sources":["script.js"],"names":["Todo","options","titleField","document","querySelector","dateField","descField","saveBtn","delBtn","newNoteBtn","body","tabsList","addEventListener","clickToTab","bind","createNewNote","saveNote","deleteNote","initTabs","JSON","parse","localStorage","getItem","notes","getNotes","innerHTML","forEach","note","index","length","id","active","click","getAttribute","showCurrentNoteInfo","classList","remove","value","Date","now","toLocaleString","arr","newNote","Number","title","date","desc","currentNote","find","indexOf","clear","setItem","stringify","Math","random","push","activeBtn","noteId","result","filter","item","storage","event","buttons","querySelectorAll","target","contains","add"],"mappings":"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","file":"script.js","sourcesContent":["class Todo {\r\n\r\n    constructor() {\r\n        this.options = {\r\n            // Fields\r\n            titleField: document.querySelector('.sidebar__title'),\r\n            dateField: document.querySelector('.sidebar__date'),\r\n            descField: document.querySelector('.sidebar__desc'),\r\n            // Buttons\r\n            saveBtn: document.querySelector('.sidebar__save'),\r\n            delBtn: document.querySelector('.sidebar__del'),\r\n            newNoteBtn: document.querySelector('.main__btn-new'),\r\n            // Body\r\n            body: document.querySelector('.main__body'),\r\n            tabsList: document.querySelector('.main__tabs')\r\n        };\r\n        this.options.tabsList.addEventListener('click', this.clickToTab.bind(this));\r\n        this.options.newNoteBtn.addEventListener('click', this.createNewNote.bind(this));\r\n        this.options.saveBtn.addEventListener('click', this.saveNote.bind(this));\r\n        this.options.delBtn.addEventListener('click', this.deleteNote.bind(this));\r\n\r\n        this.initTabs();\r\n    }\r\n\r\n    getNotes() {\r\n        // Storage\r\n        return JSON.parse(localStorage.getItem('notes')) || [];\r\n    }\r\n\r\n    initTabs() {\r\n        const notes = this.getNotes();\r\n        this.options.tabsList.innerHTML = '';\r\n        notes.forEach((note, index) => {\r\n            this.options.tabsList.innerHTML += `<button \r\n                                    class=\"main__button ${notes.length - 1 === index ? 'main__button--active' : ''}\" \r\n                                    id=${note.id}\r\n                                    >№${index + 1} \r\n                                    </button>`;\r\n        });\r\n        const active = document.querySelector('.main__button--active');\r\n        if (active) {\r\n            active.click();\r\n            const id = active.getAttribute('id');\r\n            this.showCurrentNoteInfo(id);\r\n        } else {\r\n            this.createNewNote();\r\n        }\r\n    }\r\n\r\n    createNewNote() {\r\n        let active = document.querySelector('.main__button--active');\r\n        if (active) {\r\n            if (!active.getAttribute('id')) {\r\n                // Если уже идет процесс создания заметки\r\n                return false\r\n            }\r\n            active.classList.remove('main__button--active');\r\n        }\r\n        this.options.titleField.value = '';\r\n        this.options.dateField.value = new Date(Date.now()).toLocaleString('ru-RU');\r\n        this.options.descField.value = '';\r\n        this.options.body.innerHTML = '';\r\n        this.options.tabsList.innerHTML += `<button class=\"main__button main__button--active\">New note</button>`;\r\n    }\r\n\r\n    saveNote() {\r\n        const active = document.querySelector('.main__button--active');\r\n        const id = active.getAttribute('id');\r\n        let arr = this.getNotes();\r\n        if (id) {\r\n            let newNote = {\r\n                id: Number(id),\r\n                title: this.options.titleField.value,\r\n                date: this.options.dateField.value,\r\n                desc: this.options.descField.value\r\n            };\r\n            const currentNote = arr.find( note => note.id === Number(id));\r\n            const index = arr.indexOf(currentNote);\r\n            arr[index] = newNote;\r\n            localStorage.clear();\r\n            localStorage.setItem('notes', JSON.stringify(arr));\r\n        } else {\r\n            let newNote = {\r\n                id: Math.random(),\r\n                title: this.options.titleField.value,\r\n                date: this.options.dateField.value,\r\n                desc: this.options.descField.value\r\n            };\r\n            arr.push(newNote);\r\n            localStorage.clear();\r\n            localStorage.setItem('notes', JSON.stringify(arr));\r\n        }\r\n        this.initTabs();\r\n    }\r\n\r\n    deleteNote() {\r\n        const activeBtn = document.querySelector('.main__button--active');\r\n        const noteId = activeBtn.getAttribute('id');\r\n        let arr = this.getNotes();\r\n        const result = arr.filter( item => item.id !== Number(noteId) );\r\n        localStorage.clear();\r\n        localStorage.setItem('notes', JSON.stringify(result));\r\n        this.initTabs();\r\n    }\r\n\r\n    showCurrentNoteInfo(id) {\r\n        const storage = this.getNotes();\r\n        const currentNote = storage.find( item => item.id === Number(id) );\r\n        this.options.body.innerHTML = `\r\n            <h3>${currentNote.title} <span>${currentNote.date}</span></h3>\r\n            <p>${currentNote.desc}</p>\r\n        `;\r\n        this.options.titleField.value = currentNote.title;\r\n        this.options.dateField.value = currentNote.date;\r\n        this.options.descField.value = currentNote.desc;\r\n    }\r\n\r\n    clickToTab(event) {\r\n        const buttons = document.querySelectorAll('.main__button');\r\n        if (event.target.classList.contains('main__button')) {\r\n            const id = event.target.getAttribute('id');\r\n            const active = document.querySelector('.main__button--active');\r\n            if (active.getAttribute('id')) {\r\n                active.classList.remove('main__button--active');\r\n                event.target.classList.add('main__button--active');\r\n                this.showCurrentNoteInfo(id);\r\n            } else {\r\n                // Если это создание новой заметки\r\n                if (buttons.length > 1) {\r\n                    // Если заметок больше чем одна\r\n                    active.remove();\r\n                    event.target.classList.add('main__button--active');\r\n                    this.showCurrentNoteInfo(id);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n}\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    new Todo();\r\n});\r\n"]}