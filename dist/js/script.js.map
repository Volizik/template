{"version":3,"sources":["script.js"],"names":["Todo","options","titleField","document","querySelector","dateField","descField","saveBtn","delBtn","newNoteBtn","body","tabsList","addEventListener","clickToTab","bind","createNewNote","saveNewNote","deleteNote","initTabs","JSON","parse","localStorage","getItem","notes","getNotes","innerHTML","forEach","note","index","length","id","active","click","getAttribute","showCurrentNoteInfo","classList","remove","value","arr","newNote","Math","random","title","date","desc","push","clear","setItem","stringify","activeBtn","noteId","result","filter","item","Number","storage","currentNote","find","event","target","contains","add"],"mappings":"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","file":"script.js","sourcesContent":["class Todo {\r\n\r\n    constructor() {\r\n        this.options = {\r\n            // Fields\r\n            titleField: document.querySelector('.sidebar__title'),\r\n            dateField: document.querySelector('.sidebar__date'),\r\n            descField: document.querySelector('.sidebar__desc'),\r\n            // Buttons\r\n            saveBtn: document.querySelector('.sidebar__save'),\r\n            delBtn: document.querySelector('.sidebar__del'),\r\n            newNoteBtn: document.querySelector('.main__btn-new'),\r\n            // Body\r\n            body: document.querySelector('.main__body'),\r\n            tabsList: document.querySelector('.main__tabs')\r\n        };\r\n        this.options.tabsList.addEventListener('click', this.clickToTab.bind(this));\r\n        this.options.newNoteBtn.addEventListener('click', this.createNewNote.bind(this));\r\n        this.options.saveBtn.addEventListener('click', this.saveNewNote.bind(this));\r\n        this.options.delBtn.addEventListener('click', this.deleteNote.bind(this));\r\n\r\n        this.initTabs();\r\n    }\r\n\r\n    getNotes() {\r\n        // Storage\r\n        return JSON.parse(localStorage.getItem('notes')) || [];\r\n    }\r\n\r\n    initTabs() {\r\n        const notes = this.getNotes();\r\n        this.options.tabsList.innerHTML = '';\r\n        notes.forEach((note, index) => {\r\n            this.options.tabsList.innerHTML += `<button \r\n                                    class=\"main__button ${notes.length - 1 === index ? 'main__button--active' : ''}\" \r\n                                    id=${note.id}\r\n                                    >№${index + 1} \r\n                                    </button>`;\r\n        });\r\n        const active = document.querySelector('.main__button--active');\r\n        if (active) {\r\n            active.click();\r\n            const id = active.getAttribute('id');\r\n            this.showCurrentNoteInfo(id);\r\n        } else {\r\n            this.createNewNote();\r\n        }\r\n    }\r\n\r\n    createNewNote() {\r\n        let active = document.querySelector('.main__button--active');\r\n        if (active) {\r\n            active.classList.remove('main__button--active');\r\n        }\r\n        this.options.titleField.value ='';\r\n        this.options.dateField.value ='';\r\n        this.options.descField.value ='';\r\n        this.options.body.innerHTML = '';\r\n        this.options.tabsList.innerHTML += `<button class=\"main__button main__button--active\">New note</button>`;\r\n    }\r\n\r\n    saveNewNote() {\r\n        let arr = this.getNotes();\r\n        let newNote = {\r\n            id: Math.random(),\r\n            title: this.options.titleField.value,\r\n            date: this.options.dateField.value,\r\n            desc: this.options.descField.value\r\n        };\r\n        arr.push(newNote);\r\n        localStorage.clear();\r\n        localStorage.setItem('notes', JSON.stringify(arr));\r\n        this.initTabs();\r\n    }\r\n\r\n    deleteNote() {\r\n        const activeBtn = document.querySelector('.main__button--active');\r\n        const noteId = activeBtn.getAttribute('id');\r\n        let arr = this.getNotes();\r\n        const result = arr.filter( item => item.id !== Number(noteId) );\r\n        localStorage.clear();\r\n        localStorage.setItem('notes', JSON.stringify(result));\r\n        this.initTabs();\r\n    }\r\n\r\n    showCurrentNoteInfo(id) {\r\n        const storage = this.getNotes();\r\n        const currentNote = storage.find( item => item.id === Number(id) );\r\n        this.options.body.innerHTML = `\r\n            <h3>${currentNote.title} <span>${currentNote.date}</span></h3>\r\n            <p>${currentNote.desc}</p>\r\n        `\r\n    }\r\n\r\n    clickToTab(event) {\r\n        if (event.target.classList.contains('main__button')) {\r\n            const id = event.target.getAttribute('id');\r\n            const active = document.querySelector('.main__button--active');\r\n            active.classList.remove('main__button--active');\r\n            event.target.classList.add('main__button--active');\r\n            this.showCurrentNoteInfo(id);\r\n        }\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n    new Todo();\r\n});\r\n\r\n\r\n// // Storage\r\n// let storage = JSON.parse(localStorage.getItem('notes')) || [];\r\n//\r\n// function showCurrentNote(note) {\r\n//     const body = document.querySelector('.main__body');\r\n//     body.innerHTML = `\r\n//             <h3>${note.title} <span>${note.date}</span></h3>\r\n//             <p>${note.desc}</p>\r\n//         `\r\n// }\r\n//\r\n// function showNote(el) {\r\n//     const id = el.getAttribute('id');\r\n//     storage.forEach((note) => {\r\n//         if (note.id === Number(id)) {\r\n//             showCurrentNote(note);\r\n//             console.log(note);\r\n//         }\r\n//     })\r\n// }\r\n//\r\n// document.addEventListener('DOMContentLoaded', () => {\r\n//\r\n//     // Fields\r\n//     const titleField = document.querySelector('.sidebar__title');\r\n//     const dateField = document.querySelector('.sidebar__date');\r\n//     const descField = document.querySelector('.sidebar__desc');\r\n//     // Buttons\r\n//     const addBtn = document.querySelector('.sidebar__save');\r\n//     const newBtn = document.querySelector('.main__btn-new');\r\n//     const delBtn = document.querySelector('.sidebar__del');\r\n//     let tabs;\r\n//     // Body\r\n//     const body = document.querySelector('.main__body');\r\n//     const tabsList = document.querySelector('.main__tabs');\r\n//\r\n//     let newNote = {\r\n//         id: Math.random(),\r\n//         title: titleField.value,\r\n//         date: dateField.value,\r\n//         desc: descField.value\r\n//     };\r\n//\r\n//\r\n//     function init() {\r\n//         if (storage.length > 0) {\r\n//             createTabs()\r\n//         } else {\r\n//             body.innerHTML = '<h3 style=\"text-align: center\">Нет сохраненных заметок. Создайте новую!</h3>'\r\n//         }\r\n//     }\r\n//\r\n//     function saveNote() {\r\n//         let arr = JSON.parse(localStorage.getItem('notes')) || [];\r\n//         newNote = {\r\n//             id: Math.random(),\r\n//             title: titleField.value,\r\n//             date: dateField.value,\r\n//             desc: descField.value\r\n//         };\r\n//         arr.push(newNote);\r\n//         localStorage.clear();\r\n//         localStorage.setItem('notes', JSON.stringify(arr));\r\n//         storage = JSON.parse(localStorage.getItem('notes'));\r\n//         createTabs()\r\n//     }\r\n//\r\n//     function createTabs() {\r\n//         const stor = JSON.parse(localStorage.getItem('notes')) || [];\r\n//         tabsList.innerHTML = '';\r\n//         stor.forEach((note, index) => {\r\n//             tabsList.innerHTML += `<button\r\n//                                     class=\"main__button ${storage.length - 1 === index ? 'main__button--active' : ''}\"\r\n//                                     id=${note.id}\r\n//                                     onclick=\"showNote(event.target)\"\r\n//                                     >№${index + 1}\r\n//                                     </button>`;\r\n//         });\r\n//         tabs = document.querySelector('.main__tab');\r\n//\r\n//         const active = document.querySelector('.main__button--active');\r\n//         active.click()\r\n//     }\r\n//\r\n//\r\n//     init();\r\n//\r\n//     addBtn.addEventListener('click', () => {\r\n//         saveNote()\r\n//     });\r\n//\r\n//\r\n// });"]}